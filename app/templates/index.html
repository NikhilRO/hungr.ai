<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hungrai Hungrai Hippos</title>
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,300,500' rel='stylesheet' type='text/css'>
    {{ stylesheet_tag("style_css") | safe }}
    {{ stylesheet_tag("main_css") | safe }}
  </head>
  <body>
    <div id=main></div>
    <img id="video"></img>
    {{ javascript_tag("app_js") | safe }}

    <!-- Scripts -->
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
    <script type="text/javascript" charset="utf-8">
        var socket = io.connect('http://' + document.domain + ':' + location.port);
        socket.on('connect', function() {
            console.log('Socket connected!');
            socket.emit('readCamera');
        });
        socket.on('videoStart', function(messageEvent) {
          const video = document.querySelector('#video');
          let enc = new TextDecoder("utf-8");
          const data = enc.decode(messageEvent.data);
          video.src = "data:image/jpeg;base64," + data;
        });
    </script>
  </body>
</html>
